<div class="main-content">
  <div class="page-content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12">
          <div class="card overflow-hidden">
            <div class="rounded profile-basic position-relative"
              style="background-image: url('assets/images/profile-bg.jpg');background-size: cover;background-position: center;">
              <div class="bg-overlay bg-primary"></div>
            </div>
            <div class="card-body">
              <div class="pt-3">
                <div class="row justify-content-star gy-4">
                  <div class="col-xl-2 col-lg-2">
                    <div class="mt-n7" style="text-align: center;">
                      <img src="{{ani_imgfot}}" alt="" class="avatar-xlg p-1"
                        style="width: 150px; border-radius: 15px;">
                    </div>
                  </div>
                  <div class="col-xl-2 ms-3 col-lg-2 pt-3">
                    <h5 class="fs-23 text-capitalize">{{ani_nombre}}</h5>
                  </div>

                </div>
              </div>


              <div class="row mt-2 mb-5  mt-lg-4 gy-3">
                <div class="col-lg order-1">
                  <!-- Nav tabs -->
                  <ul class="nav nav-pills animation-nav gap-2 gap-lg-3 flex-grow-1" role="tablist">
                    <li class="nav-item">
                      <a class="nav-link fs-14 active" data-bs-toggle="tab" href="#overview-tab" role="tab">
                        <i class="bi bi-info-circle d-inline-block d-md-none"></i> <span
                          class="d-none d-md-inline-block">Mascota</span>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link fs-14" data-bs-toggle="tab" href="#activities" role="tab">
                        <i class="bi bi-person-circle d-inline-block d-md-none"></i> <span
                          class="d-none d-md-inline-block">Propietario</span>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link fs-14" data-bs-toggle="tab" href="#projects" role="tab">
                        <i class="bi bi-chat-left-dots-fill d-inline-block d-md-none"></i> <span
                          class="d-none d-md-inline-block">Observaciones</span>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link fs-14" data-bs-toggle="tab" href="#friends" role="tab">
                        <i class="ri-folder-4-line d-inline-block d-md-none"></i> <span
                          class="d-none d-md-inline-block">Vacunas</span>
                      </a>
                    </li>

                  </ul>
                </div>

              </div>

            </div>

          </div>
        </div>
      </div>



      <div class="row">
        <div class="col-lg-12">
          <!-- Tab panes -->
          <div class="tab-content text-muted">
            <div class="tab-pane active" id="overview-tab" role="tabpanel">
              <div class="card">
                <div class="row justify-content-center align-items-center gy-2">
                  <div class=" card-body pt-3 col-lg-8">
                    <h3 style="text-align: center;padding-bottom: 12px;">INFORMACIÓN</h3>
                    <div class="row">
                      <div class="col-3">
                        <p class="mb-1"><b>CODIGO:</b></p>
                      </div>
                      <div class="col-9">
                        <h6 class="text-truncate mb-2 font-weight-bold text-capitalize">{{ ani_codigo }}</h6>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-3">
                        <p class="mb-1"><b>ESPECIE:</b></p>
                      </div>
                      <div class="col-9">
                        <h6 class="text-truncate mb-2 font-weight-bold text-capitalize">{{ esp_descri }}</h6>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-3">
                        <p class="mb-1"><b>RAZA:</b></p>
                      </div>
                      <div class="col-9">
                        <h6 class="text-truncate mb-2 font-weight-bold text-capitalize">{{ anr_descri }}</h6>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-3">
                        <p class="mb-1"><b>SEXO:</b></p>
                      </div>
                      <div class="col-8">
                        <h6 class="text-truncate mb-2 font-weight-bold text-capitalize">{{ ans_descri }}</h6>
                      </div>
                    </div>
                  </div>




                </div>
              </div>

              <!--end row-->
            </div>

            <div class="tab-pane fade" id="activities" role="tabpanel">
              <div class="card">
                <div class="row justify-content-center align-items-center gy-2">
                  <div class=" card-body pt-3 col-lg-8">
                    <h3 style="text-align: center; padding-bottom: 12px;">PROPIETARIO</h3>
                    <table class="table table-bordered table-striped">
                      <thead class="table-light">
                        <tr>
                          <th scope="col" class="text-center">N°</th>
                          <th scope="col" class="text-center">NOMBRE</th>
                          <th scope="col" class="text-center">CORREO</th>
                          <th scope="col" class="text-center">T. DOC</th>
                          <th scope="col" class="text-center">N° DOC</th>
                          <th scope="col" class="text-center">TELÉFONO</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let data of dataAnimalPropietario; let idx = index" class="text-center">
                          <td>{{ idx + 1 }}</td>
                          <td>{{ data.per_nomcom }}</td>
                          <td>{{ data.pec_correo }}</td>
                          <td>{{ data.tdi_abrevi }}</td>
                          <td>{{ data.per_numdoi }}</td>
                          <td>{{ data.pet_numero }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <div class="col-xl-3 col-lg-3 pt-3 text-center">
                    <button type="button" (click)="openModal(AsignarAnimalPropietario,'modal-lg')"
                      class="btn btn-success btn-label btn-md">
                      <i
                        class="bi bi-chat-left label-icon align-middle fs-16 me-2"></i> Añadir Propietario</button>
                  </div>


                </div>

              </div>
              <!--end card-->

            </div>
            <!--end tab-pane-->
            <div class="tab-pane fade" id="projects" role="tabpanel">
              <div class="card">
                pagina 3
                <div class="row justify-content-center align-items-center gy-2">
                  <div class=" card-body pt-3 col-lg-8">
                    <h3 style="text-align: center;padding-bottom: 12px;">Observaciones</h3>
                      <table class="table table-bordered table-striped">
                        <thead class="table-light">
                          <tr>
                            <th scope="col" class="text-center">N°</th>
                            <th scope="col" class="text-center">Observacion</th>
                            <th scope="col" class="text-center">Fecha</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let data of dataAnimalObservacion; let idx = index" class="text-center">
                            <td>{{ idx + 1 }}</td>
                            <td>{{ data.aob_descri }}</td>
                            <td>{{ data.aob_fecreg | date:'short' }}</td>
                          </tr>
                        </tbody>
                      </table>
                  </div>

                  <div class="col-xl-3 col-lg-3 pt-3 text-center">
                    <button type="button" (click)="openModal(AgregarObservacion,'modal-lg')"
                      class="btn btn-success btn-label btn-md"><i
                        class="bi bi-chat-left label-icon align-middle fs-16 me-2"></i> Añadir Observacion</button>
                  </div>


                </div>

                <!--end card-body-->
              </div>
              <!--end card-->
            </div>
            <!--end tab-pane-->

            <div class="tab-pane fade" id="friends" role="tabpanel">
              <div class="card">
                pagina 4
                <div class="row justify-content-center align-items-center gy-2">
                  <div class=" card-body pt-3 col-lg-8">
                    <h3 style="text-align: center;padding-bottom: 12px;">Vacunas</h3>
                      <table class="table table-bordered table-striped">
                        <thead class="table-light">
                          <tr>
                            <th scope="col" class="text-center">N°</th>
                            <th scope="col" class="text-center">Nombre</th>
                            <th scope="col" class="text-center">Fecha</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let data of dataAnimalVacunas; let idx = index" class="text-center">
                            <td>{{ idx + 1 }}</td>
                            <td>{{ data.ava_descri }}</td>
                            <td>{{ data.ava_fecvac | date }}</td>
                          </tr>
                        </tbody>
                      </table>
                  </div>

                  <div class="col-xl-3 col-lg-3 pt-3 text-center">
                    <button type="button" (click)="openModal(AgregarVacuna,'modal-lg')"
                      class="btn btn-success btn-label btn-md"><i
                        class="bi bi-chat-left label-icon align-middle fs-16 me-2"></i> Añadir Vacuna</button>
                  </div>


                </div>
              </div>
            </div>
            <!--end tab-pane-->
          </div>
          <!--end tab-content-->
        </div>
        <!--end col-->
      </div>
      <!--end row-->

      <ng-template #AgregarVacuna>
        <div class="modal-header">
          <h4 class="modal-title pull-left">
            <i class="bi bi-chat-dots btn-icon-wrapper"></i> Agregar Vacuna
          </h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef?.hide()" id="closeModal">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body">
          <div class="col-lg-12">

            <!-- Campo para el nombre de la vacuna con validación de longitud -->
            <div class="col-md-12 mt-2">
              <div class="form-floating">
                <input type="text" class="form-control" [(ngModel)]="p_ava_descri" name="nombreVacuna" placeholder="Nombre de la Vacuna"
                  required [minlength]="3" [maxlength]="50" #nombreVacuna="ngModel">
                <label>Nombre de la Vacuna</label>

                <!-- Mensajes de error -->
                <div *ngIf="nombreVacuna.invalid && nombreVacuna.touched" class="text-danger">
                  <small *ngIf="nombreVacuna.errors?.['required']">El nombre de la vacuna es obligatorio.</small>
                  <small *ngIf="nombreVacuna.errors?.['minlength']">El nombre debe tener al menos 3 caracteres.</small>
                  <small *ngIf="nombreVacuna.errors?.['maxlength']">El nombre no puede exceder los 50 caracteres.</small>
                </div>
              </div>
            </div>

            <!-- Campo de Fecha estilizado con Bootstrap -->
            <div class="col-md-12 mt-2">
              <div class="form-floating">
                <input type="date" class="form-control" [(ngModel)]="p_ava_fecvac" placeholder="Fecha de la Vacuna">
                <label>Fecha de Vacuna</label>
              </div>
            </div>

            <div class="col-md-12 mt-2">
              <div class="row">
                <div class="col-md-12 text-end">
                  <button (click)="guardarVacuna()" type="button" class="btn btn-primary" style="margin-right: 5px;" [disabled]="nombreVacuna.invalid">Registrar</button>
                  <button type="button" class="btn btn-danger" (click)="CerrarModal()">Cancelar</button>
                </div>
              </div>
            </div>

          </div>
        </div>
      </ng-template>



      <ng-template #AgregarVacuna>
        <div class="modal-header">
          <h4 class="modal-title pull-left">
            <i class="bi bi-chat-dots btn-icon-wrapper"></i> Agregar Vacuna
          </h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef?.hide()" id="closeModal">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body">
          <div class="col-lg-12">

            <!-- Campo para el nombre de la vacuna con validación -->
            <div class="col-md-12 mt-2">
              <div class="form-floating">
                <input type="text" class="form-control" [(ngModel)]="p_ava_descri" name="nombreVacuna" placeholder="Nombre de la Vacuna"
                  required [minlength]="3" [maxlength]="50" #nombreVacuna="ngModel">
                <label>Nombre de la Vacuna</label>


              </div>
            </div>

            <!-- Campo de Fecha -->
            <div class="col-md-12 mt-2">
              <div class="form-floating">
                <input type="date" class="form-control" [(ngModel)]="p_ava_fecvac" placeholder="Fecha de la Vacuna">
                <label>Fecha de Vacuna</label>
              </div>
            </div>

            <div class="col-md-12 mt-2">
              <div class="row">
                <div class="col-md-12 text-end">
                  <button (click)="guardarVacuna()" type="button" class="btn btn-primary" style="margin-right: 5px;" [disabled]="nombreVacuna.invalid">Registrar</button>
                  <button type="button" class="btn btn-danger" (click)="CerrarModal()">Cancelar</button>
                </div>
              </div>
            </div>

          </div>
        </div>
      </ng-template>


      <ng-template #AgregarObservacion>
        <div class="modal-header">
          <h4 class="modal-title pull-left"> <i class="bi bi-chat-dots btn-icon-wrapper"> </i> Agregar Observacion
          </h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef?.hide()" id="closeModal">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body ">
          <div class="col-lg-12">

            <div class="col-md-12 mt-2">
              <div class="form-floating">
                <textarea class="form-control" [(ngModel)]="p_aob_descri" rows="6"
                  placeholder="Escribe tu Observacion aquí..."></textarea>
                <label>Observacion</label>
              </div>
            </div>
            <div class="col-md-12 mt-2">
              <div class="row">
                <div class="col-md-12 text-end">
                  <button (click)="guardarObservacion()" type="button" class="btn btn-primary"
                    style="margin-right: 5px;">Registrar</button>
                  <button type="button" class="btn btn-danger" (click)="CerrarModal()">Cancelar</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-template>





      <ng-template #AsignarAnimalPropietario>
        <div class="modal-header">
          <h4 class="modal-title pull-left"> <i class="pe-7s-plus btn-icon-wrapper"> </i> Asignar Propietario</h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef?.hide()" id="closeModal">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="col-lg-12">
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-floating">
                    <select class="form-select" [(ngModel)]="p_tdi_id" data-choices-sorting="true">
                      <option selected="" value="0">Seleccione...</option>
                      <option *ngFor="let data of datosTipoDocumento" value="{{data.tdi_id}}">{{data.tdi_descri}}
                      </option>
                    </select>
                    <label>Tipo de Documento</label>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="text" class="form-control" [(ngModel)]="p_tdi_numero" (blur)="buscarPropietario()"
                      (keypress)="validarNumero($event)">
                    <label>N° de Documento</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-12 mt-2">
              <div class="row">
                <div class="col-md-12">
                  <div class="form-floating">
                    <input type="text" class="form-control form-control-sm" [(ngModel)]="p_per_nombre"
                      style="background: #ebf0f5; font-size: 16px;" disabled>
                    <label>Nombres</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-12 mt-2">
              <div class="row">
                <div class="col-md-12 text-end">
                  <button (click)="guardarRegistro()" type="button" class="btn btn-primary" style="margin-right: 5px;">
                    <i class=""></i>Registrar</button>
                  <button type="button" class="btn btn-danger" (click)="CerrarModal()">Cancelar</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-template>
